:root{ --fs: 18px; --maxw: 68ch; --lh: 1.6; }
*{ box-sizing: border-box; }
html,body{ height:100%; margin:0; }
body{ font-family: system-ui, -apple-system, Segoe UI, Roboto, "Times New Roman", serif; }

/* Темы */
.theme-light{ --bg:#fff; --fg:#111; --muted:#666; --bar:#f5f5f7; }
.theme-dark { --bg:#0e0f12; --fg:#e9e9ea; --muted:#9aa; --bar:#1a1c22; }

/* Верхняя панель */
.bar{ position: sticky; top:0; z-index:10; display:flex; align-items:center; gap:.75rem; padding:.75rem 1rem; background:var(--bar); border-bottom:1px solid #0001; }
.bar-left{ min-width:7rem; }
.bar-right{ display:flex; gap:.5rem; align-items:center; }
.title{ margin:0; font-size:1.05rem; text-align:center; flex:1; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.back{ text-decoration:none; }
.btn{ border:1px solid #0002; background:#fff; padding:.35rem .6rem; border-radius:.5rem; cursor:pointer; }
.theme-dark .btn{ background:#222; color:#fff; border-color:#fff1; }

/* Область просмотра */
.viewer{ height:calc(100vh - 56px); background:var(--bg); color:var(--fg); }

/* Текстовый режим */
.text{ max-width:var(--maxw); margin-inline:auto; padding:1rem clamp(1rem, 4vw, 2rem) 3rem; line-height:var(--lh); font-size:var(--fs); }
.text p{ margin:0 0 1em; }
.text h1,.text h2,.text h3{ line-height:1.25; margin:1.2em 0 .6em; }
.text img, .text figure{ max-width:100%; height:auto; }

/* PDF режим */
.pdf{ width:100%; height:100%; border:0; background:#2b2b2b; }

/* Цвета */
body{ background:var(--bg); color:var(--fg); }

/* ===== Ночной режим: инверсия текста ===== */
/* ===== Ночной режим: инверсия текста ===== */
.text.night{
  /* инверсия + сдвиг оттенка, чтобы белый не уходил в сине-зелёный */
  filter: invert(1) hue-rotate(180deg);
}
/* Вернём изображения и медиа к нормальным цветам (двойная инверсия) */
.text.night img,
.text.night video,
.text.night svg,
.text.night canvas,
.text.night iframe{
  filter: invert(1) hue-rotate(180deg);
}

/* PDF через canvas */
.pdf-container{
  height: calc(100vh - 56px);
  display:grid;
  place-items:center;
  background:var(--bg);
  padding:1rem;
}
#pdfCanvas{
  max-width:100%;
  height:auto;
  background:#fff;
  border-radius: 14px;
  box-shadow: 0 10px 30px #0003;
}
.theme-dark #pdfCanvas{ background:#111; }

/* Ночной режим для PDF (инверсия контейнера) */
.pdf-container.night{ filter: invert(1) hue-rotate(180deg); }

